import{_ as c,a as r}from"./chunks/CopyRight.vue_vue_type_script_setup_true_lang.67549825.js";import{_ as E,C as y,o as i,c as u,H as s,w as l,Q as b,k as n,a}from"./chunks/framework.27021b64.js";import{_ as F}from"./chunks/index.e5e15ed4.js";import"./chunks/CloseOutlined.9c3246b4.js";import"./chunks/isObjectLike.46b91259.js";import"./chunks/Serializer.fad5b415.js";import"./chunks/LeftOutlined.9040821c.js";import"./chunks/EyeOutlined.53cc40ff.js";const S=JSON.parse('{"title":"VitePress 如何开启 PWA 功能","description":"","frontmatter":{"sitemapTime":"2023/07/14"},"headers":[],"relativePath":"framework/vitepress/pwa.md","filePath":"framework/vitepress/pwa.md","lastUpdated":1689336855000}'),m={name:"framework/vitepress/pwa.md"},d=b(`<h1 id="vitepress-如何开启-pwa-功能" tabindex="-1">VitePress 如何开启 PWA 功能 <a class="header-anchor" href="#vitepress-如何开启-pwa-功能" aria-label="Permalink to &quot;VitePress 如何开启 PWA 功能&quot;">​</a></h1><p>VitePress 默认支持 PWA，但需要你自己配置一些内容。本文将介绍如何开启 PWA 功能。</p><h2 id="什么是-pwa" tabindex="-1">什么是 PWA <a class="header-anchor" href="#什么是-pwa" aria-label="Permalink to &quot;什么是 PWA&quot;">​</a></h2><p>PWA（Progressive Web App）是一种渐进式 Web 应用，它可以像原生应用一样提供类似的体验。PWA 可以在离线时工作，可以在主屏幕上添加图标，可以接收推送通知等。</p><h2 id="开启-pwa-功能" tabindex="-1">开启 PWA 功能 <a class="header-anchor" href="#开启-pwa-功能" aria-label="Permalink to &quot;开启 PWA 功能&quot;">​</a></h2><p>首先要先安装 <code>@vite-pwa/vitepress</code>：</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">yarn</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">add</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">@vite-pwa/vitepress</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">yarn</span><span style="color:#24292E;"> </span><span style="color:#032F62;">add</span><span style="color:#24292E;"> </span><span style="color:#032F62;">@vite-pwa/vitepress</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// .vitepress/config.js</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { defineConfig } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;vite&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { withPwa } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;@vite-pwa/vitepress&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">withPwa</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">defineConfig</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  pwa: {</span></span>
<span class="line"><span style="color:#E1E4E8;">    outDir: </span><span style="color:#9ECBFF;">&quot;.vitepress/dist&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 输出目录</span></span>
<span class="line"><span style="color:#E1E4E8;">    registerType: </span><span style="color:#9ECBFF;">&quot;autoUpdate&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 注册类型为自动更新</span></span>
<span class="line"><span style="color:#E1E4E8;">    includeManifestIcons: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 不包含清单图标</span></span>
<span class="line"><span style="color:#E1E4E8;">    manifest: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      id: </span><span style="color:#9ECBFF;">&quot;/&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 清单 ID</span></span>
<span class="line"><span style="color:#E1E4E8;">      name: title, </span><span style="color:#6A737D;">// 应用名称</span></span>
<span class="line"><span style="color:#E1E4E8;">      short_name: title, </span><span style="color:#6A737D;">// 应用的短名称</span></span>
<span class="line"><span style="color:#E1E4E8;">      description: description, </span><span style="color:#6A737D;">// 应用的描述</span></span>
<span class="line"><span style="color:#E1E4E8;">      theme_color: </span><span style="color:#9ECBFF;">&quot;#ffffff&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 主题颜色</span></span>
<span class="line"><span style="color:#E1E4E8;">      icons: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          src: </span><span style="color:#9ECBFF;">&quot;/images/pwa-120x120.png&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 图标路径</span></span>
<span class="line"><span style="color:#E1E4E8;">          sizes: </span><span style="color:#9ECBFF;">&quot;120x120&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 图标尺寸</span></span>
<span class="line"><span style="color:#E1E4E8;">          type: </span><span style="color:#9ECBFF;">&quot;image/png&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 图标类型</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          src: </span><span style="color:#9ECBFF;">&quot;/images/pwa-192x192.png&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          sizes: </span><span style="color:#9ECBFF;">&quot;192x192&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          type: </span><span style="color:#9ECBFF;">&quot;image/png&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          src: </span><span style="color:#9ECBFF;">&quot;/images/pwa-512x512.png&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          sizes: </span><span style="color:#9ECBFF;">&quot;512x512&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          type: </span><span style="color:#9ECBFF;">&quot;image/png&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">          purpose: </span><span style="color:#9ECBFF;">&quot;any&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    workbox: {</span></span>
<span class="line"><span style="color:#E1E4E8;">      globPatterns: [</span><span style="color:#9ECBFF;">&quot;**/*.{css,js,html,svg,png,ico,txt,woff2}&quot;</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// 匹配需要缓存的文件类型</span></span>
<span class="line"><span style="color:#E1E4E8;">      runtimeCaching: [</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          urlPattern:</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">https:</span><span style="color:#85E89D;font-weight:bold;">\\/\\/</span><span style="color:#DBEDFF;">fonts</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">googleapis</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">com</span><span style="color:#85E89D;font-weight:bold;">\\/</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 Google 字体</span></span>
<span class="line"><span style="color:#E1E4E8;">          handler: </span><span style="color:#9ECBFF;">&quot;CacheFirst&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存优先策略</span></span>
<span class="line"><span style="color:#E1E4E8;">          options: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheName: </span><span style="color:#9ECBFF;">&quot;google-fonts-cache&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#E1E4E8;">            expiration: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxEntries: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxAgeSeconds: </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">365</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存有效期，365天</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              statuses: [</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">          },</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          urlPattern:</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">https:</span><span style="color:#85E89D;font-weight:bold;">\\/\\/</span><span style="color:#DBEDFF;">fonts</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">gstatic</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">com</span><span style="color:#85E89D;font-weight:bold;">\\/</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 Google 字体</span></span>
<span class="line"><span style="color:#E1E4E8;">          handler: </span><span style="color:#9ECBFF;">&quot;CacheFirst&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存优先策略</span></span>
<span class="line"><span style="color:#E1E4E8;">          options: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheName: </span><span style="color:#9ECBFF;">&quot;gstatic-fonts-cache&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#E1E4E8;">            expiration: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxEntries: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxAgeSeconds: </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">365</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存有效期，365天</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              statuses: [</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">          },</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">        {</span></span>
<span class="line"><span style="color:#E1E4E8;">          urlPattern:</span><span style="color:#DBEDFF;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">^</span><span style="color:#DBEDFF;">https:</span><span style="color:#85E89D;font-weight:bold;">\\/\\/</span><span style="color:#DBEDFF;">cdn</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">jsdelivr</span><span style="color:#85E89D;font-weight:bold;">\\.</span><span style="color:#DBEDFF;">net</span><span style="color:#85E89D;font-weight:bold;">\\/</span><span style="color:#79B8FF;">.</span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;">/</span><span style="color:#F97583;">i</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 jsdelivr 图片</span></span>
<span class="line"><span style="color:#E1E4E8;">          handler: </span><span style="color:#9ECBFF;">&quot;NetworkFirst&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 网络优先策略</span></span>
<span class="line"><span style="color:#E1E4E8;">          options: {</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheName: </span><span style="color:#9ECBFF;">&quot;jsdelivr-images-cache&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#E1E4E8;">            expiration: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxEntries: </span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#E1E4E8;">              maxAgeSeconds: </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">60</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">24</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">7</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// 缓存有效期，7天</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#E1E4E8;">              statuses: [</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">200</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#E1E4E8;">            },</span></span>
<span class="line"><span style="color:#E1E4E8;">          },</span></span>
<span class="line"><span style="color:#E1E4E8;">        },</span></span>
<span class="line"><span style="color:#E1E4E8;">      ],</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// .vitepress/config.js</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { defineConfig } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;vite&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { withPwa } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;@vite-pwa/vitepress&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">withPwa</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">defineConfig</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  pwa: {</span></span>
<span class="line"><span style="color:#24292E;">    outDir: </span><span style="color:#032F62;">&quot;.vitepress/dist&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 输出目录</span></span>
<span class="line"><span style="color:#24292E;">    registerType: </span><span style="color:#032F62;">&quot;autoUpdate&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 注册类型为自动更新</span></span>
<span class="line"><span style="color:#24292E;">    includeManifestIcons: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 不包含清单图标</span></span>
<span class="line"><span style="color:#24292E;">    manifest: {</span></span>
<span class="line"><span style="color:#24292E;">      id: </span><span style="color:#032F62;">&quot;/&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 清单 ID</span></span>
<span class="line"><span style="color:#24292E;">      name: title, </span><span style="color:#6A737D;">// 应用名称</span></span>
<span class="line"><span style="color:#24292E;">      short_name: title, </span><span style="color:#6A737D;">// 应用的短名称</span></span>
<span class="line"><span style="color:#24292E;">      description: description, </span><span style="color:#6A737D;">// 应用的描述</span></span>
<span class="line"><span style="color:#24292E;">      theme_color: </span><span style="color:#032F62;">&quot;#ffffff&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 主题颜色</span></span>
<span class="line"><span style="color:#24292E;">      icons: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          src: </span><span style="color:#032F62;">&quot;/images/pwa-120x120.png&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 图标路径</span></span>
<span class="line"><span style="color:#24292E;">          sizes: </span><span style="color:#032F62;">&quot;120x120&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 图标尺寸</span></span>
<span class="line"><span style="color:#24292E;">          type: </span><span style="color:#032F62;">&quot;image/png&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 图标类型</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          src: </span><span style="color:#032F62;">&quot;/images/pwa-192x192.png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          sizes: </span><span style="color:#032F62;">&quot;192x192&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          type: </span><span style="color:#032F62;">&quot;image/png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          src: </span><span style="color:#032F62;">&quot;/images/pwa-512x512.png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          sizes: </span><span style="color:#032F62;">&quot;512x512&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          type: </span><span style="color:#032F62;">&quot;image/png&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">          purpose: </span><span style="color:#032F62;">&quot;any&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    workbox: {</span></span>
<span class="line"><span style="color:#24292E;">      globPatterns: [</span><span style="color:#032F62;">&quot;**/*.{css,js,html,svg,png,ico,txt,woff2}&quot;</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// 匹配需要缓存的文件类型</span></span>
<span class="line"><span style="color:#24292E;">      runtimeCaching: [</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          urlPattern:</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">https:</span><span style="color:#22863A;font-weight:bold;">\\/\\/</span><span style="color:#032F62;">fonts</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">googleapis</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">com</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 Google 字体</span></span>
<span class="line"><span style="color:#24292E;">          handler: </span><span style="color:#032F62;">&quot;CacheFirst&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存优先策略</span></span>
<span class="line"><span style="color:#24292E;">          options: {</span></span>
<span class="line"><span style="color:#24292E;">            cacheName: </span><span style="color:#032F62;">&quot;google-fonts-cache&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#24292E;">            expiration: {</span></span>
<span class="line"><span style="color:#24292E;">              maxEntries: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#24292E;">              maxAgeSeconds: </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">365</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存有效期，365天</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#24292E;">              statuses: [</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">200</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">          },</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          urlPattern:</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">https:</span><span style="color:#22863A;font-weight:bold;">\\/\\/</span><span style="color:#032F62;">fonts</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">gstatic</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">com</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 Google 字体</span></span>
<span class="line"><span style="color:#24292E;">          handler: </span><span style="color:#032F62;">&quot;CacheFirst&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存优先策略</span></span>
<span class="line"><span style="color:#24292E;">          options: {</span></span>
<span class="line"><span style="color:#24292E;">            cacheName: </span><span style="color:#032F62;">&quot;gstatic-fonts-cache&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#24292E;">            expiration: {</span></span>
<span class="line"><span style="color:#24292E;">              maxEntries: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#24292E;">              maxAgeSeconds: </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">365</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存有效期，365天</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#24292E;">              statuses: [</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">200</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">          },</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">        {</span></span>
<span class="line"><span style="color:#24292E;">          urlPattern:</span><span style="color:#032F62;"> /</span><span style="color:#D73A49;">^</span><span style="color:#032F62;">https:</span><span style="color:#22863A;font-weight:bold;">\\/\\/</span><span style="color:#032F62;">cdn</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">jsdelivr</span><span style="color:#22863A;font-weight:bold;">\\.</span><span style="color:#032F62;">net</span><span style="color:#22863A;font-weight:bold;">\\/</span><span style="color:#005CC5;">.</span><span style="color:#D73A49;">*</span><span style="color:#032F62;">/</span><span style="color:#D73A49;">i</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 匹配需要缓存的 jsdelivr 图片</span></span>
<span class="line"><span style="color:#24292E;">          handler: </span><span style="color:#032F62;">&quot;NetworkFirst&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 网络优先策略</span></span>
<span class="line"><span style="color:#24292E;">          options: {</span></span>
<span class="line"><span style="color:#24292E;">            cacheName: </span><span style="color:#032F62;">&quot;jsdelivr-images-cache&quot;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存名称</span></span>
<span class="line"><span style="color:#24292E;">            expiration: {</span></span>
<span class="line"><span style="color:#24292E;">              maxEntries: </span><span style="color:#005CC5;">10</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 最大缓存条目数</span></span>
<span class="line"><span style="color:#24292E;">              maxAgeSeconds: </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">60</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">24</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">*</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">7</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// 缓存有效期，7天</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">            cacheableResponse: {</span></span>
<span class="line"><span style="color:#24292E;">              statuses: [</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">200</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// 缓存的响应状态码</span></span>
<span class="line"><span style="color:#24292E;">            },</span></span>
<span class="line"><span style="color:#24292E;">          },</span></span>
<span class="line"><span style="color:#24292E;">        },</span></span>
<span class="line"><span style="color:#24292E;">      ],</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br></div></div><h2 id="pwa-线上验证" tabindex="-1">PWA 线上验证 <a class="header-anchor" href="#pwa-线上验证" aria-label="Permalink to &quot;PWA 线上验证&quot;">​</a></h2>`,9),D=n("p",null,[a("在浏览器中打开 VitePress 站点，然后按下 "),n("code",null,"F12"),a(" 打开开发者工具，切换到 "),n("code",null,"Network"),a(" 选项卡，然后点击 "),n("code",null,"Offline"),a(" 按钮，即可模拟离线状态。")],-1),A=n("p",null,"或者，将本网站添加到主屏幕，然后断开网络，即可看到网站可以正常访问。",-1);function h(g,C,q,f,B,w){const o=F,p=y("ClientOnly"),e=c,t=r;return i(),u("div",null,[d,s(p,null,{default:l(()=>[s(o,{src:"/images/vitepress/pwa-install.png",alt:""})]),_:1}),D,A,s(p,null,{default:l(()=>[s(e)]),_:1}),s(p,null,{default:l(()=>[s(t)]),_:1})])}const V=E(m,[["render",h]]);export{S as __pageData,V as default};
