<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React18 æ–°ç‰¹æ€§ | å…¨æ ˆå°å†Œ</title>
    <meta name="description" content="å…¨æ ˆå°å†Œå®˜ç½‘ï¼Œå‰ç«¯è¿›é˜¶å¼€å‘æŠ€å·§ï¼Œæµè§ˆå™¨æ‰©å±•å¼€å‘æŠ€å·§ï¼ŒReactä¸Vueå¼€å‘æŠ€å·§ï¼ŒJSé€†å‘ï¼ŒPythonçˆ¬è™«ï¼ŒNode.jsçˆ¬è™«">
    <link rel="preload stylesheet" href="/assets/style.ac23bd30.css" as="style">
    
    <script type="module" src="/assets/app.6591aa99.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.27021b64.js">
    <link rel="modulepreload" href="/assets/chunks/dayjs.min.6dcbab11.js">
    <link rel="modulepreload" href="/assets/chunks/getTag.55064484.js">
    <link rel="modulepreload" href="/assets/chunks/isObjectLike.46b91259.js">
    <link rel="modulepreload" href="/assets/chunks/Serializer.fad5b415.js">
    <link rel="modulepreload" href="/assets/chunks/theme.09797e8b.js">
    <link rel="modulepreload" href="/assets/chunks/commonjsHelpers.725317a4.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-c0b17d02.7350939e.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-d6f8fe3a.37a08941.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-v2-58f49b84.b6748455.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-dedf2781.f94c7c90.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-e0ffc2d1.8ef7e8f0.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-088dbd90.5fc7fb8b.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-64895a6e.0851c2e0.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-3fca7ce7.1f315e47.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-0ca4be02.bfc40c6b.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-e13af0f0.6c3a6664.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-84aa38e3.f026d0f3.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-a8cc8886.d9782f13.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-802a48d3.2fab4ddf.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-9a586ac6.6e91e898.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-96f2b9df.a8960b9f.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-adaa34f8.2bc907b9.js">
    <link rel="modulepreload" href="/assets/chunks/flowchart-elk-definition-56584a6c.9a1f9561.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-1a90b03d.1daf5b69.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-57868176.f7092908.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-a7f8e230.a04e6e98.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.ade1a5ba.js">
    <link rel="modulepreload" href="/assets/chunks/CopyRight.vue_vue_type_script_setup_true_lang.67549825.js">
    <link rel="modulepreload" href="/assets/framework_react_new-features.md.67830a00.lean.js">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="å…¨æ ˆå°å†Œå®˜ç½‘ï¼Œå‰ç«¯å·¥ä½œæŠ€å·§ï¼ŒReactä¸“æ ï¼ŒVueä¸“æ ï¼Œæµè§ˆå™¨æ‰©å±•ï¼ŒJSé€†å‘ï¼ŒPythonçˆ¬è™«ï¼ŒNode.jsçˆ¬è™«">
    <meta name="author" content="dapan">
    <meta name="google-site-verification" content="8C08prB1osC3jsMbYZjmrkWEIM1zduj1OxedQjghNxs">
    <meta name="baidu-site-verification" content="codeva-xf7u8GA3Wp">
    <meta name="360-site-verification" content="37fc981df313cb2376c89f6fded04cfc">
    <meta name="msvalidate.01" content="95080530C3B969C7083402BB727761AA">
    <meta property="og:type" content="article">
    <meta name="application-name" content="dapan">
    <meta name="apple-mobile-web-app-title" content="dapan">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.googleapis.com">
    <link rel="preconnect" crossorigin="anonymous" href="https://fonts.gstatic.com">
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"dark",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <link rel="manifest" href="/manifest.webmanifest">
    <script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-6c29af8f><!--[--><!--]--><!--[--><span tabindex="-1" data-v-13360153></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-13360153> Skip to content </a><!--]--><!----><header class="VPNav" data-v-6c29af8f data-v-d07a9596><div class="VPNavBar has-sidebar" data-v-d07a9596 data-v-1ad84f55><div class="container" data-v-1ad84f55><div class="title" data-v-1ad84f55><div class="VPNavBarTitle has-sidebar" data-v-1ad84f55 data-v-bb9b7ccd><a class="title" href="/" data-v-bb9b7ccd><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-570a7bfc><!--]--><!--[-->å…¨æ ˆå°å†Œ<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-1ad84f55><div class="curtain" data-v-1ad84f55></div><div class="content-body" data-v-1ad84f55><!--[--><!--]--><div class="VPNavBarSearch search" data-v-1ad84f55><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">è¯·è¾“å…¥å…³é”®è¯</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-1ad84f55 data-v-6f18f6d8><span id="main-nav-aria-label" class="visually-hidden" data-v-6f18f6d8>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8 data-v-e09eaf05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05><span class="text" data-v-e09eaf05><!----><span data-v-e09eaf05>ğŸ”¥ é€†å‘æ±‡æ€»</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05><div class="VPMenu" data-v-e09eaf05 data-v-83538ad8><div class="items" data-v-83538ad8><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/reverse/jsreverse/xhs.html" data-v-32752aba><!--[-->JSé€†å‘<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8 data-v-e09eaf05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05><span class="text" data-v-e09eaf05><!----><span data-v-e09eaf05>ğŸ”¥ å‰ç«¯æ¡†æ¶</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05><div class="VPMenu" data-v-e09eaf05 data-v-83538ad8><div class="items" data-v-83538ad8><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/framework/react/" data-v-32752aba><!--[-->React<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/framework/vue/" data-v-32752aba><!--[-->Vue<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/framework/vitepress/" data-v-32752aba><!--[-->VitePress<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/framework/nestjs/" data-v-32752aba><!--[-->NestJs<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8 data-v-e09eaf05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05><span class="text" data-v-e09eaf05><!----><span data-v-e09eaf05>ğŸŒµ ä¸“ æ </span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05><div class="VPMenu" data-v-e09eaf05 data-v-83538ad8><div class="items" data-v-83538ad8><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/column/javascript/" data-v-32752aba><!--[-->javascript<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link" href="/column/git/" data-v-32752aba><!--[-->git<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-83538ad8 data-v-282f9473><p class="title" data-v-282f9473>æ ·å¼</p><!--[--><!--[--><div class="VPMenuLink" data-v-282f9473 data-v-32752aba><a class="VPLink link" href="/column/css/css/" data-v-32752aba><!--[-->css<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-282f9473 data-v-32752aba><a class="VPLink link" href="/column/css/tailwindcss/" data-v-32752aba><!--[-->tailwindcss<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-282f9473 data-v-32752aba><a class="VPLink link" href="/column/css/unocss/" data-v-32752aba><!--[-->unocss<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/note/" tabindex="0" data-v-6f18f6d8 data-v-74d51423><!--[--><span data-v-74d51423>ğŸ“” å° è®°</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f18f6d8 data-v-e09eaf05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-e09eaf05><span class="text" data-v-e09eaf05><!----><span data-v-e09eaf05>ğŸŒ ç«™ ç‚¹</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-e09eaf05><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-e09eaf05><div class="VPMenu" data-v-e09eaf05 data-v-83538ad8><div class="items" data-v-83538ad8><!--[--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link vp-external-link-icon" href="https://www.skillgroup.cn/" target="_blank" rel="noreferrer" data-v-32752aba><!--[-->é»˜è®¤ç«™ç‚¹<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link vp-external-link-icon" href="https://docs.skillgroup.cn/" target="_blank" rel="noreferrer" data-v-32752aba><!--[-->å¤‡ç”¨ç«™ç‚¹<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-83538ad8 data-v-32752aba><a class="VPLink link vp-external-link-icon" href="https://dapandocs.vercel.app/" target="_blank" rel="noreferrer" data-v-32752aba><!--[-->Vercel ç«™ç‚¹<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-1ad84f55 data-v-29d1e105><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-29d1e105 data-v-742fbc76 data-v-7e1f08b8><span class="check" data-v-7e1f08b8><span class="icon" data-v-7e1f08b8><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-742fbc76><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-742fbc76><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-1ad84f55 data-v-1c6c3963 data-v-9783732d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/dapandocs/danpan-docs" aria-label="github" target="_blank" rel="noopener" data-v-9783732d data-v-329a054b><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-1ad84f55 data-v-3f2e35ad data-v-e09eaf05><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-e09eaf05><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-e09eaf05><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-e09eaf05><div class="VPMenu" data-v-e09eaf05 data-v-83538ad8><!----><!--[--><!--[--><!----><div class="group" data-v-3f2e35ad><div class="item appearance" data-v-3f2e35ad><p class="label" data-v-3f2e35ad>å¤–è§‚</p><div class="appearance-action" data-v-3f2e35ad><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-3f2e35ad data-v-742fbc76 data-v-7e1f08b8><span class="check" data-v-7e1f08b8><span class="icon" data-v-7e1f08b8><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-742fbc76><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-742fbc76><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-3f2e35ad><div class="item social-links" data-v-3f2e35ad><div class="VPSocialLinks social-links-list" data-v-3f2e35ad data-v-9783732d><!--[--><a class="VPSocialLink no-icon" href="https://github.com/dapandocs/danpan-docs" aria-label="github" target="_blank" rel="noopener" data-v-9783732d data-v-329a054b><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-1ad84f55 data-v-db42f22e><span class="container" data-v-db42f22e><span class="top" data-v-db42f22e></span><span class="middle" data-v-db42f22e></span><span class="bottom" data-v-db42f22e></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-6c29af8f data-v-f11df5b9><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-f11df5b9><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-f11df5b9><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-f11df5b9>ç›®å½•</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-f11df5b9 data-v-3a49c47c><button data-v-3a49c47c>è¿”å›é¡¶éƒ¨</button><!----></div></div><aside class="VPSidebar" data-v-6c29af8f data-v-5505e66a><div class="curtain" data-v-5505e66a></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-5505e66a><span class="visually-hidden" id="sidebar-aria-label" data-v-5505e66a> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-5505e66a><section class="VPSidebarItem level-0 has-active" data-v-5505e66a data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h2 class="text" data-v-1c083c26>React</h2><!----></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>ç®€è¿°</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/jsx.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>JSX è¯­æ³•</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-1c083c26 data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h3 class="text" data-v-1c083c26>React Hooks</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1c083c26><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-1c083c26><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-state.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useState</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-effect.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useEffect</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-ref.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useRef</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/memo.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>memo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-memo.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useMemo</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-callback.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useCallback</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-context.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useContext</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/forward-ref.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>forwardRef</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-reducer.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useReducer</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-imperative-handle.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useImperativeHandle</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/hooks/use-deferred-value.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>useDeferredValue</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/code-splitting.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/life-cycle.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>React ç”Ÿå‘½å‘¨æœŸ</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/render-order.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>çˆ¶å­ç»„ä»¶çš„æ¸²æŸ“é¡ºåº</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/new-features.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>React18 æ–°ç‰¹æ€§</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/strict-mode.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>React18 ä¸¥æ ¼æ¨¡å¼</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-1c083c26 data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h3 class="text" data-v-1c083c26>React18 æºç è§£æç³»åˆ—</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-1c083c26><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-1c083c26><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/scanalysis/react-debugger.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>React Debug é…ç½®</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/scanalysis/jsx.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>React.createElement å’Œ jsx()</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/scanalysis/create-root.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>createRoot ç›¸å…³</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="group" data-v-5505e66a><section class="VPSidebarItem level-0" data-v-5505e66a data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h2 class="text" data-v-1c083c26>React-Router</h2><!----></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-1 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/react-router/" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>ç®€è¿°</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1" data-v-1c083c26 data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h3 class="text" data-v-1c083c26>Router Components</h3><!----></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/react-router/browser-router.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>BrowserRouter</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1" data-v-1c083c26 data-v-1c083c26><div class="item" role="button" tabindex="0" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><h3 class="text" data-v-1c083c26>Components</h3><!----></div><div class="items" data-v-1c083c26><!--[--><div class="VPSidebarItem level-2 is-link" data-v-1c083c26 data-v-1c083c26><div class="item" data-v-1c083c26><div class="indicator" data-v-1c083c26></div><a class="VPLink link link" href="/framework/react/react-router/routes.html" data-v-1c083c26><!--[--><p class="text" data-v-1c083c26>Routes</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-6c29af8f data-v-5f4fc72d><div class="VPDoc has-sidebar has-aside" data-v-5f4fc72d data-v-279178e3><!--[--><!--]--><div class="container" data-v-279178e3><div class="aside" data-v-279178e3><div class="aside-curtain" data-v-279178e3></div><div class="aside-container" data-v-279178e3><div class="aside-content" data-v-279178e3><div class="VPDocAside" data-v-279178e3 data-v-38f8493b><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-38f8493b data-v-1be3d0f9><div class="content" data-v-1be3d0f9><div class="outline-marker" data-v-1be3d0f9></div><div class="outline-title" role="heading" aria-level="2" data-v-1be3d0f9>å¤§çº²</div><nav aria-labelledby="doc-outline-aria-label" data-v-1be3d0f9><span class="visually-hidden" id="doc-outline-aria-label" data-v-1be3d0f9> Table of Contents for current page </span><ul class="root" data-v-1be3d0f9 data-v-6b8ae2c9><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-38f8493b></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-279178e3><div class="content-container" data-v-279178e3><!--[--><!--]--><!----><main class="main" data-v-279178e3><div style="position:relative;" class="vp-doc _framework_react_new-features" data-v-279178e3><div><h1 id="react18-æ–°ç‰¹æ€§" tabindex="-1">React18 æ–°ç‰¹æ€§ <a class="header-anchor" href="#react18-æ–°ç‰¹æ€§" aria-label="Permalink to &quot;React18 æ–°ç‰¹æ€§&quot;">â€‹</a></h1><h2 id="æ–°ç‰¹æ€§" tabindex="-1">æ–°ç‰¹æ€§ <a class="header-anchor" href="#æ–°ç‰¹æ€§" aria-label="Permalink to &quot;æ–°ç‰¹æ€§&quot;">â€‹</a></h2><h3 id="render-api" tabindex="-1">Render API <a class="header-anchor" href="#render-api" aria-label="Permalink to &quot;Render API&quot;">â€‹</a></h3><p>React 18 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¸²æŸ“ APIï¼Œåä¸º <code>createRoot</code>ã€‚è¿™æ˜¯ä¸ React 17 å’Œä¹‹å‰ç‰ˆæœ¬ä¸­çš„ <code>ReactDOM.render</code> æ–¹æ³•ç›¸å¯¹çš„ã€‚</p><h4 id="_1-createroot" tabindex="-1">1. createRoot <a class="header-anchor" href="#_1-createroot" aria-label="Permalink to &quot;1. createRoot&quot;">â€‹</a></h4><ul><li>åœ¨ React 18 ä¸­ï¼Œä¸ºäº†æ”¯æŒå¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰ï¼Œå¼•å…¥äº†æ–°çš„ <code>createRoot</code> APIã€‚</li><li>ä½¿ç”¨è¿™ä¸ª APIï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª rootï¼Œç„¶ååœ¨è¿™ä¸ª root ä¸Šè°ƒç”¨ <code>render</code> æ–¹æ³•æ¥æ¸²æŸ“ç»„ä»¶ã€‚</li><li>è¿™ç§æ–¹å¼å…è®¸ React åœ¨éœ€è¦çš„æ—¶å€™ä¸­æ–­æ¸²æŸ“ï¼Œä»è€Œå®ç°æ›´å¥½çš„æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">root</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> ReactDOM.</span><span style="color:#B392F0;">createRoot</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">));</span></span>
<span class="line"><span style="color:#E1E4E8;">root.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(&lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">root</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> ReactDOM.</span><span style="color:#6F42C1;">createRoot</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">));</span></span>
<span class="line"><span style="color:#24292E;">root.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(&lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-reactdom-render" tabindex="-1">2. ReactDOM.render <a class="header-anchor" href="#_2-reactdom-render" aria-label="Permalink to &quot;2. ReactDOM.render&quot;">â€‹</a></h4><ul><li>åœ¨ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>ReactDOM.render</code> æ–¹æ³•æ¥æ¸²æŸ“ç»„ä»¶ã€‚</li><li>è¿™ç§æ–¹å¼æ˜¯åŒæ­¥çš„ï¼Œæ„å‘³ç€ä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹ç›´åˆ°æ¸²æŸ“å®Œæˆã€‚</li></ul><p>ç¤ºä¾‹ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(&lt;</span><span style="color:#79B8FF;">App</span><span style="color:#E1E4E8;"> /&gt;, document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;root&quot;</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(&lt;</span><span style="color:#005CC5;">App</span><span style="color:#24292E;"> /&gt;, document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;root&quot;</span><span style="color:#24292E;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>React 18 çš„ <code>createRoot</code> API æ˜¯ä¸ºäº†æ”¯æŒå¹¶å‘æ¨¡å¼è€Œå¼•å…¥çš„ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–°çš„ã€æ›´çµæ´»çš„æ–¹å¼æ¥æ¸²æŸ“ç»„ä»¶ï¼Œè€Œ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä½¿ç”¨çš„æ˜¯ <code>ReactDOM.render</code> æ–¹æ³•ã€‚</p><h3 id="setstate-è‡ªåŠ¨æ‰¹å¤„ç†" tabindex="-1">setState è‡ªåŠ¨æ‰¹å¤„ç† <a class="header-anchor" href="#setstate-è‡ªåŠ¨æ‰¹å¤„ç†" aria-label="Permalink to &quot;setState è‡ªåŠ¨æ‰¹å¤„ç†&quot;">â€‹</a></h3><p>åœ¨ React ä¸­ï¼Œ<code>setState</code> çš„è¡Œä¸ºæ˜¯ä¸€ä¸ªç»å¸¸è¢«è®¨è®ºçš„è¯é¢˜ã€‚ç‰¹åˆ«æ˜¯å…³äºå®ƒçš„å¼‚æ­¥æ€§å’Œè‡ªåŠ¨æ‰¹å¤„ç†ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ React 17 å’Œ React 18 åœ¨è¿™æ–¹é¢çš„å·®å¼‚ã€‚</p><h4 id="_1-react-17-åŠä¹‹å‰çš„ç‰ˆæœ¬" tabindex="-1">1. React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬ <a class="header-anchor" href="#_1-react-17-åŠä¹‹å‰çš„ç‰ˆæœ¬" aria-label="Permalink to &quot;1. React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬&quot;">â€‹</a></h4><ul><li>åœ¨ React 17 åŠå…¶ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒReact ä¼šåœ¨äº‹ä»¶å¤„ç†å™¨ï¼ˆå¦‚ç‚¹å‡»äº‹ä»¶ï¼‰ä¸­è‡ªåŠ¨æ‰¹å¤„ç† <code>setState</code> è°ƒç”¨ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨ä¸­è¿ç»­è°ƒç”¨å¤šæ¬¡ <code>setState</code>ï¼ŒReact ä¼šå°†è¿™äº›æ›´æ–°æ‰¹é‡å¤„ç†ï¼Œä»è€Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</li><li>ä½†æ˜¯ï¼Œåœ¨å¼‚æ­¥ä»£ç  <code>setTimeout</code>ã€<code>Promise</code> ä¸­ï¼Œ<code>setState</code> ä¸ä¼šè¢«æ‰¹å¤„ç†ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li></ul><h4 id="_2-react-18" tabindex="-1">2. React 18 <a class="header-anchor" href="#_2-react-18" aria-label="Permalink to &quot;2. React 18&quot;">â€‹</a></h4><ul><li>åœ¨ React 18 ä¸­ï¼Œç”±äºå¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼Œ<code>setState</code> çš„æ‰¹å¤„ç†è¡Œä¸ºå¾—åˆ°äº†å¢å¼ºã€‚</li><li>ä¸ä»…åœ¨äº‹ä»¶å¤„ç†å™¨ä¸­ï¼Œè€Œä¸”åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼ŒåŒ…æ‹¬å¼‚æ­¥ä»£ç ï¼ŒReact éƒ½ä¼šå°è¯•æ‰¹å¤„ç†å¤šä¸ª <code>setState</code> è°ƒç”¨ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„é‡æ–°æ¸²æŸ“ã€‚</li><li>è¿™ä¸ºå¼€å‘è€…æä¾›äº†æ›´ä¸€è‡´çš„è¡Œä¸ºå’Œæ›´å¥½çš„æ€§èƒ½ã€‚</li></ul><p>React 18 åœ¨ <code>setState</code> çš„è‡ªåŠ¨æ‰¹å¤„ç†æ–¹é¢åšäº†å¢å¼ºï¼Œä½¿å¾—åœ¨æ›´å¤šçš„åœºæ™¯ä¸‹ï¼Œè¿ç»­çš„ <code>setState</code> è°ƒç”¨ä¼šè¢«æ‰¹é‡å¤„ç†ï¼Œä»è€Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“ã€‚</p><h4 id="ä¾‹å­" tabindex="-1">ä¾‹å­ <a class="header-anchor" href="#ä¾‹å­" aria-label="Permalink to &quot;ä¾‹å­&quot;">â€‹</a></h4><p>å½“ç„¶å¯ä»¥ï¼Œä»¥ä¸‹æ˜¯ React 18 ä¸­å‡½æ•°ç»„ä»¶çš„ä¾‹å­ï¼Œå±•ç¤ºäº† React äº‹ä»¶å¤„ç†å‡½æ•°ã€<code>setTimeout</code> å¼‚æ­¥å‡½æ•°ä»¥åŠåŸç”Ÿ JS äº‹ä»¶ä¸­çš„ <code>setState</code>ï¼ˆåœ¨å‡½æ•°ç»„ä»¶ä¸­æ˜¯ <code>useState</code> çš„ setter å‡½æ•°ï¼‰æ‰¹å¤„ç†è¡Œä¸ºï¼š</p><h5 id="react-äº‹ä»¶å¤„ç†å‡½æ•°" tabindex="-1">React äº‹ä»¶å¤„ç†å‡½æ•° <a class="header-anchor" href="#react-äº‹ä»¶å¤„ç†å‡½æ•°" aria-label="Permalink to &quot;React äº‹ä»¶å¤„ç†å‡½æ•°&quot;">â€‹</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ReactEventHandlerExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleClick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// åœ¨React18å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨éƒ½ä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleClick}&gt;Clicked {count} times&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ReactEventHandlerExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleClick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// åœ¨React18å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨éƒ½ä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleClick}&gt;Clicked {count} times&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="settimeout-ä¸­çš„-setstate" tabindex="-1"><code>setTimeout</code> ä¸­çš„ <code>setState</code> <a class="header-anchor" href="#settimeout-ä¸­çš„-setstate" aria-label="Permalink to &quot;`setTimeout` ä¸­çš„ `setState`&quot;">â€‹</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">SetTimeoutExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleTimeout</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// åœ¨ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨ä¸ä¼šè¢«æ‰¹å¤„ç†ï¼Œä¼šè§¦å‘ä¸¤æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// åœ¨ React 18 ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨ä¹Ÿä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">    }, </span><span style="color:#79B8FF;">1000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleTimeout}&gt;Increase after 1 second&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">SetTimeoutExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleTimeout</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// åœ¨ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨ä¸ä¼šè¢«æ‰¹å¤„ç†ï¼Œä¼šè§¦å‘ä¸¤æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// åœ¨ React 18 ä¸­ï¼Œè¿™ä¸¤æ¬¡ setCount è°ƒç”¨ä¹Ÿä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    }, </span><span style="color:#005CC5;">1000</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleTimeout}&gt;Increase after 1 second&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h5 id="åŸç”Ÿ-js-äº‹ä»¶" tabindex="-1">åŸç”Ÿ JS äº‹ä»¶ <a class="header-anchor" href="#åŸç”Ÿ-js-äº‹ä»¶" aria-label="Permalink to &quot;åŸç”Ÿ JS äº‹ä»¶&quot;">â€‹</a></h5><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { useState, useEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NativeEventExample</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">clicked</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setClicked</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">useEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleDocumentClick</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setClicked</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// åœ¨ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setXXX è°ƒç”¨ä¸ä¼šè¢«æ‰¹å¤„ç†ï¼Œä¼šè§¦å‘ä¸¤æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// åœ¨ React 18 ä¸­ï¼Œè¿™ä¸¤æ¬¡ setXXX è°ƒç”¨ä¹Ÿä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    document.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;click&quot;</span><span style="color:#E1E4E8;">, handleDocumentClick);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ¸…é™¤äº‹ä»¶ç›‘å¬å™¨</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      document.</span><span style="color:#B392F0;">removeEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;click&quot;</span><span style="color:#E1E4E8;">, handleDocumentClick);</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;Document was clicked {count} times&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { useState, useEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NativeEventExample</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">clicked</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setClicked</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">false</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleDocumentClick</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setClicked</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">true</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// åœ¨ React 17 å’Œä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸¤æ¬¡ setXXX è°ƒç”¨ä¸ä¼šè¢«æ‰¹å¤„ç†ï¼Œä¼šè§¦å‘ä¸¤æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// åœ¨ React 18 ä¸­ï¼Œè¿™ä¸¤æ¬¡ setXXX è°ƒç”¨ä¹Ÿä¼šè¢«æ‰¹å¤„ç†ï¼Œåªè§¦å‘ä¸€æ¬¡é‡æ–°æ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    document.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;click&quot;</span><span style="color:#24292E;">, handleDocumentClick);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ¸…é™¤äº‹ä»¶ç›‘å¬å™¨</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      document.</span><span style="color:#6F42C1;">removeEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;click&quot;</span><span style="color:#24292E;">, handleDocumentClick);</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">  }, []);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;Document was clicked {count} times&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>è¿™äº›ä¾‹å­å±•ç¤ºäº†åœ¨ React 18 ä¸­ï¼Œæ— è®ºæ˜¯åœ¨ React äº‹ä»¶å¤„ç†å‡½æ•°ã€<code>setTimeout</code> å¼‚æ­¥å‡½æ•°è¿˜æ˜¯åŸç”Ÿ JS äº‹ä»¶ä¸­ï¼Œè¿ç»­çš„ <code>setState</code>ï¼ˆæˆ– <code>setXXX</code>ï¼‰è°ƒç”¨éƒ½ä¼šè¢«æ‰¹å¤„ç†ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚</p><h3 id="flushsync" tabindex="-1">flushSync <a class="header-anchor" href="#flushsync" aria-label="Permalink to &quot;flushSync&quot;">â€‹</a></h3><p><code>flushSync</code> æ˜¯ä¸€ä¸ª ReactDOM çš„ APIï¼Œå®ƒå…è®¸ä½ åœ¨ React 17 å’Œ React 18 ä¸­åŒæ­¥åœ°æ‰§è¡ŒæŸäº›æ“ä½œï¼Œç¡®ä¿è¿™äº›æ“ä½œåœ¨å½“å‰çš„ JavaScript æ‰§è¡Œå †æ ˆä¸­å®Œæˆã€‚è¿™å¯¹äºé‚£äº›éœ€è¦ç«‹å³è·å– DOM æ›´æ–°ç»“æœçš„åœºæ™¯ç‰¹åˆ«æœ‰ç”¨ã€‚</p><p>åœ¨ React 17 ä¸­ï¼Œç”±äº React çš„æ›´æ–°æ˜¯åŒæ­¥çš„ï¼ˆé™¤éåœ¨æŸäº›å¼‚æ­¥åœºæ™¯ä¸­ï¼‰ï¼Œæ‰€ä»¥å¤§å¤šæ•°æƒ…å†µä¸‹ä½ å¯èƒ½ä¸éœ€è¦ <code>flushSync</code>ã€‚ä½†åœ¨ React 18 ä¸­ï¼Œç”±äºå¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼ŒæŸäº›æ›´æ–°å¯èƒ½ä¼šè¢«å»¶è¿Ÿæ‰§è¡Œï¼Œè¿™æ—¶ <code>flushSync</code> å°±å˜å¾—éå¸¸æœ‰ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>flushSync</code> çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p><h3 id="_1-ä½¿ç”¨-flushsync-åœ¨å‡½æ•°ç»„ä»¶ä¸­" tabindex="-1">1. ä½¿ç”¨ <code>flushSync</code> åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼š <a class="header-anchor" href="#_1-ä½¿ç”¨-flushsync-åœ¨å‡½æ•°ç»„ä»¶ä¸­" aria-label="Permalink to &quot;1. ä½¿ç”¨ `flushSync` åœ¨å‡½æ•°ç»„ä»¶ä¸­ï¼š&quot;">â€‹</a></h3><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleImmediateUpdate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// åœ¨è¿™é‡Œï¼Œcount çš„æ›´æ–°ä¼šç«‹å³è¢«åº”ç”¨å¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸ä¼šæ‰¹é‡æ›´æ–°ã€‚</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleImmediateUpdate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// åœ¨è¿™é‡Œï¼Œcount çš„æ›´æ–°ä¼šç«‹å³è¢«åº”ç”¨å¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸ä¼šæ‰¹é‡æ›´æ–°ã€‚</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œå½“ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œ<code>setCount</code> æ›´æ–°ä¼šç«‹å³è¢«åº”ç”¨ï¼Œè€Œä¸ä¼šè¢«å»¶è¿Ÿã€‚</p><p>ä½†æ˜¯åœ¨ <code>flushSync</code> å‡½æ•°å†…éƒ¨çš„å¤šä¸ª setState ä»ç„¶ä¸ºæ‰¹é‡æ›´æ–°ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react-dom&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">count</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setCount</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">handleImmediateUpdate</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    ReactDOM.</span><span style="color:#B392F0;">flushSync</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// flushSync å†…éƒ¨ä»ç„¶æ‰¹é‡æ›´æ–°</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setCount</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">prevCount</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> prevCount </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react-dom&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">count</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setCount</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">handleImmediateUpdate</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    ReactDOM.</span><span style="color:#6F42C1;">flushSync</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// flushSync å†…éƒ¨ä»ç„¶æ‰¹é‡æ›´æ–°</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setCount</span><span style="color:#24292E;">((</span><span style="color:#E36209;">prevCount</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> prevCount </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleImmediateUpdate}&gt;Increment&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ€»çš„æ¥è¯´ï¼Œ<code>flushSync</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿‡åº¦ä½¿ç”¨å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ã€‚å®ƒä¸»è¦ç”¨äºé‚£äº›ç¡®å®éœ€è¦åŒæ­¥æ‰§è¡Œçš„åœºæ™¯ã€‚</p><h3 id="react-ç»„ä»¶çš„è¿”å›å€¼" tabindex="-1">React ç»„ä»¶çš„è¿”å›å€¼ <a class="header-anchor" href="#react-ç»„ä»¶çš„è¿”å›å€¼" aria-label="Permalink to &quot;React ç»„ä»¶çš„è¿”å›å€¼&quot;">â€‹</a></h3><p>åœ¨ React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°ç»„ä»¶è¿”å› <code>undefined</code>ï¼ŒReact ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚è¿™æ˜¯ä¸ºäº†å¸®åŠ©å¼€å‘è€…æ•è·å¯èƒ½çš„é”™è¯¯ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç»„ä»¶ä¸åº”è¯¥è¿”å› <code>undefined</code>ã€‚</p><p>åœ¨ React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå½“å‡½æ•°ç»„ä»¶è¿”å› <code>undefined</code> æ—¶ï¼ŒReact ä¼šæŠ›å‡ºä»¥ä¸‹é”™è¯¯ï¼š</p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Nothing was returned from render. This usually means a return statement is missing. Or, to render nothing, return null.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä½†åœ¨ React 18 ä¸­ï¼Œè¿™ä¸€è¡Œä¸ºå‘ç”Ÿäº†å˜åŒ–ã€‚å‡½æ•°ç»„ä»¶ç°åœ¨å¯ä»¥è¿”å› <code>undefined</code> è€Œä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™æ„å‘³ç€å¼€å‘è€…å¯ä»¥æ›´åŠ çµæ´»åœ°å®šä¹‰ç»„ä»¶ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ„å¤–è¿”å› <code>undefined</code> å¯¼è‡´çš„é”™è¯¯ã€‚</p><p>æ€»ç»“ï¼š</p><ul><li>React 17 åŠä¹‹å‰ï¼šå‡½æ•°ç»„ä»¶è¿”å› <code>undefined</code> ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li><li>React 18ï¼šå‡½æ•°ç»„ä»¶è¿”å› <code>undefined</code> æ˜¯å…è®¸çš„ï¼Œä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚</li></ul><h3 id="ä¸¥æ ¼æ¨¡å¼-strict-mode" tabindex="-1">ä¸¥æ ¼æ¨¡å¼ Strict Mode <a class="header-anchor" href="#ä¸¥æ ¼æ¨¡å¼-strict-mode" aria-label="Permalink to &quot;ä¸¥æ ¼æ¨¡å¼ Strict Mode&quot;">â€‹</a></h3><p><code>StrictMode</code> æ˜¯ä¸€ä¸ªç”¨äºçªå‡ºæ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æ½œåœ¨é—®é¢˜çš„å·¥å…·ã€‚å®ƒä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIï¼Œä½†ä¼šåœ¨æ¸²æŸ“ç”Ÿå‘½å‘¨æœŸä¸­æ¿€æ´»é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚</p><p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹ React 17 å’Œ React 18 ä¸­ <code>StrictMode</code> çš„ä¸»è¦å·®å¼‚ï¼š</p><h4 id="_1ã€react-17" tabindex="-1">1ã€React 17 <a class="header-anchor" href="#_1ã€react-17" aria-label="Permalink to &quot;1ã€React 17&quot;">â€‹</a></h4><p><strong>æ£€æµ‹ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šä¾‹å¦‚ï¼Œ<code>componentWillMount</code>ã€<code>componentWillReceiveProps</code> å’Œ <code>componentWillUpdate</code> åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè§¦å‘è­¦å‘Šï¼Œå› ä¸ºå®ƒä»¬åœ¨æœªæ¥çš„ React ç‰ˆæœ¬ä¸­å°†è¢«å¼ƒç”¨ã€‚</p><p><strong>è­¦å‘Šä½¿ç”¨è¿‡æ—¶æˆ–åºŸå¼ƒçš„ API</strong>ã€‚</p><p><strong>æ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨</strong>ï¼šåœ¨æŸäº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­ï¼Œä¸¥æ ¼æ¨¡å¼ä¼šæ•…æ„ä¸¤æ¬¡è°ƒç”¨å®ƒä»¬ï¼Œä»¥å¸®åŠ©æ£€æµ‹å‰¯ä½œç”¨ã€‚</p><p><strong>æ£€æµ‹ä¸æ¨èçš„ API ä½¿ç”¨</strong>ï¼Œå¦‚ <code>findDOMNode</code>ã€‚</p><p><strong>æ£€æµ‹é—ç•™çš„ context API</strong>ã€‚</p><h4 id="_2ã€react-18" tabindex="-1">2ã€React 18 <a class="header-anchor" href="#_2ã€react-18" aria-label="Permalink to &quot;2ã€React 18&quot;">â€‹</a></h4><p>åœ¨ React 18 ä¸­ï¼Œ<code>StrictMode</code> çš„è¡Œä¸ºåŸºæœ¬ä¸Šä¸ React 17 ç›¸åŒï¼Œä½†ç”±äº React 18 å¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰ï¼Œ<code>StrictMode</code> ä¹Ÿå¼€å§‹æ£€æµ‹ä¸å¹¶å‘æ¸²æŸ“ç›¸å…³çš„æ½œåœ¨é—®é¢˜ã€‚</p><p><strong>æ£€æµ‹æ½œåœ¨çš„å¹¶å‘æ¸²æŸ“é—®é¢˜</strong>ï¼šç”±äº React 18 æ”¯æŒå¹¶å‘æ¨¡å¼ï¼Œ<code>StrictMode</code> ä¼šæ£€æŸ¥ä»£ç ä¸­æ˜¯å¦å­˜åœ¨å¯èƒ½ä¸å¹¶å‘æ¸²æŸ“ä¸å…¼å®¹çš„æ¨¡å¼ã€‚</p><p><strong>åŒé‡è°ƒç”¨æ•ˆæœ</strong>ï¼šä¸ºäº†æ£€æµ‹å‰¯ä½œç”¨ï¼ŒReact 18 åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¯èƒ½ä¼šå¤šæ¬¡è°ƒç”¨æŸäº›æ•ˆæœã€‚</p><p>æ€»çš„æ¥è¯´ï¼ŒReact 18 çš„ <code>StrictMode</code> åœ¨ React 17 çš„åŸºç¡€ä¸Šå¢åŠ äº†å¯¹å¹¶å‘æ¨¡å¼çš„æ”¯æŒï¼Œå¹¶ç»§ç»­å¸®åŠ©å¼€å‘è€…è¯†åˆ«å’Œä¿®å¤æ½œåœ¨çš„é—®é¢˜ã€‚</p><h3 id="suspense-ä¸å†éœ€è¦-fallback-æ¥æ•è·" tabindex="-1">Suspense ä¸å†éœ€è¦ fallback æ¥æ•è· <a class="header-anchor" href="#suspense-ä¸å†éœ€è¦-fallback-æ¥æ•è·" aria-label="Permalink to &quot;Suspense ä¸å†éœ€è¦ fallback æ¥æ•è·&quot;">â€‹</a></h3><p>å½“ç„¶å¯ä»¥ã€‚ä»¥ä¸‹æ˜¯ React 18 ä¸ React 17 åœ¨å¤„ç†<code>null</code>æˆ–<code>undefined</code>çš„<code>Suspense</code> fallbacks æ—¶çš„å·®å¼‚æ€»ç»“ï¼š</p><h4 id="react-17-åŠä¹‹å‰çš„ç‰ˆæœ¬" tabindex="-1">React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬ <a class="header-anchor" href="#react-17-åŠä¹‹å‰çš„ç‰ˆæœ¬" aria-label="Permalink to &quot;React 17 åŠä¹‹å‰çš„ç‰ˆæœ¬&quot;">â€‹</a></h4><ul><li>å¦‚æœä¸€ä¸ª<code>Suspense</code>è¾¹ç•Œæ²¡æœ‰æä¾›<code>fallback</code>ï¼ˆå³<code>fallback</code>ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼‰ï¼ŒReact ä¼šé™é»˜åœ°è·³è¿‡è¿™ä¸ªè¾¹ç•Œï¼Œå¹¶ç»§ç»­å‘ä¸Šæœç´¢ä¸‹ä¸€ä¸ªæœ‰<code>fallback</code>çš„<code>Suspense</code>è¾¹ç•Œã€‚</li><li>ä¾‹å¦‚ï¼š</li></ul><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Loading</span><span style="color:#E1E4E8;"> /&gt;}&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«ä½¿ç”¨</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«è·³è¿‡ï¼Œå› ä¸ºæ²¡æœ‰fallback</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Page</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Loading</span><span style="color:#24292E;"> /&gt;}&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«ä½¿ç”¨</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«è·³è¿‡ï¼Œå› ä¸ºæ²¡æœ‰fallback</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Page</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå†…éƒ¨çš„<code>Suspense</code>è¾¹ç•Œæ²¡æœ‰æä¾›<code>fallback</code>ï¼Œæ‰€ä»¥ React ä¼šè·³è¿‡å®ƒå¹¶ä½¿ç”¨å¤–éƒ¨çš„<code>Suspense</code>è¾¹ç•Œçš„<code>fallback</code>ã€‚</p><h4 id="react-18" tabindex="-1">React 18 <a class="header-anchor" href="#react-18" aria-label="Permalink to &quot;React 18&quot;">â€‹</a></h4><ul><li>åœ¨ React 18 ä¸­ï¼Œå³ä½¿ä¸€ä¸ª<code>Suspense</code>è¾¹ç•Œçš„<code>fallback</code>ä¸º<code>null</code>æˆ–<code>undefined</code>ï¼ŒReact ä¹Ÿä¼šä½¿ç”¨è¿™ä¸ªè¾¹ç•Œã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact ä¼šä¸º<code>fallback</code>æ¸²æŸ“<code>null</code>ï¼Œè¿™æ„å‘³ç€åœ¨æ•°æ®åŠ è½½æœŸé—´ä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚</li><li>ä¾‹å¦‚ï¼š</li></ul><div class="language-jsx vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Loading</span><span style="color:#E1E4E8;"> /&gt;}&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œä¸ä¼šè¢«ä½¿ç”¨</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«ä½¿ç”¨ï¼Œä¸ºfallbackæ¸²æŸ“null</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">Page</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Loading</span><span style="color:#24292E;"> /&gt;}&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œä¸ä¼šè¢«ä½¿ç”¨</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt; // &lt;-- è¿™ä¸ªè¾¹ç•Œè¢«ä½¿ç”¨ï¼Œä¸ºfallbackæ¸²æŸ“null</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">Page</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå°½ç®¡å†…éƒ¨çš„<code>Suspense</code>è¾¹ç•Œæ²¡æœ‰æä¾›<code>fallback</code>ï¼Œä½† React ä»ç„¶ä¼šä½¿ç”¨å®ƒã€‚è¿™æ„å‘³ç€åœ¨<code>Page</code>ç»„ä»¶çš„æ•°æ®åŠ è½½æœŸé—´ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•å†…å®¹ï¼ˆå³<code>null</code>çŠ¶æ€ï¼‰ã€‚</p><p>è¿™ç§å˜åŒ–ç¡®ä¿äº†æ›´åŠ æ˜ç¡®å’Œä¸€è‡´çš„è¡Œä¸ºï¼Œç‰¹åˆ«æ˜¯åœ¨å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹ä¸­ã€‚</p><h2 id="_3-ä¸ªæ–°çš„-api" tabindex="-1">3 ä¸ªæ–°çš„ API <a class="header-anchor" href="#_3-ä¸ªæ–°çš„-api" aria-label="Permalink to &quot;3 ä¸ªæ–°çš„ API&quot;">â€‹</a></h2><h3 id="useid" tabindex="-1">useId <a class="header-anchor" href="#useid" aria-label="Permalink to &quot;useId&quot;">â€‹</a></h3><p><code>useId</code> æ˜¯ React 18 ä¸­çš„ä¸€ä¸ªæ–°çš„ Hookï¼Œå®ƒç”¨äºç”Ÿæˆåœ¨æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ç¨³å®šçš„å”¯ä¸€ IDï¼ŒåŒæ—¶é¿å… hydration ä¸åŒ¹é…ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>useId</code> çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li><p><strong>åŸºæœ¬ä½¿ç”¨</strong>ï¼šç›´æ¥å°†ç”Ÿæˆçš„ id ä¼ é€’ç»™éœ€è¦å®ƒçš„å…ƒç´ ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Checkbox</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useId</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id}&gt;Do you like React?&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">name</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Checkbox</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useId</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id}&gt;Do you like React?&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">name</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li><li><p><strong>åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­ä½¿ç”¨å¤šä¸ª ID</strong>ï¼šä½¿ç”¨ç›¸åŒçš„ id é™„åŠ ä¸€ä¸ªåç¼€ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">NameFields</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">id</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useId</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-firstName&quot;</span><span style="color:#E1E4E8;">}&gt;First Name&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-firstName&quot;</span><span style="color:#E1E4E8;">} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">htmlFor</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-lastName&quot;</span><span style="color:#E1E4E8;">}&gt;Last Name&lt;/</span><span style="color:#85E89D;">label</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{id </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;-lastName&quot;</span><span style="color:#E1E4E8;">} </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;text&quot;</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">NameFields</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">id</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useId</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-firstName&quot;</span><span style="color:#24292E;">}&gt;First Name&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-firstName&quot;</span><span style="color:#24292E;">} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">label</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">htmlFor</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-lastName&quot;</span><span style="color:#24292E;">}&gt;Last Name&lt;/</span><span style="color:#22863A;">label</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{id </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;-lastName&quot;</span><span style="color:#24292E;">} </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;text&quot;</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li><code>useId</code> ä¸ç”¨äºåœ¨åˆ—è¡¨ä¸­ç”Ÿæˆé”®ã€‚é”®åº”è¯¥ä»æ‚¨çš„æ•°æ®ä¸­ç”Ÿæˆã€‚</li><li><code>useId</code> ç”Ÿæˆçš„å­—ç¬¦ä¸²åŒ…æ‹¬ <code>:</code> ä»¤ç‰Œã€‚è¿™æœ‰åŠ©äºç¡®ä¿ä»¤ç‰Œæ˜¯å”¯ä¸€çš„ï¼Œä½†åœ¨ CSS é€‰æ‹©å™¨æˆ–åƒ <code>querySelectorAll</code> è¿™æ ·çš„ API ä¸­ä¸å—æ”¯æŒã€‚</li><li><code>useId</code> æ”¯æŒä¸€ä¸ª <code>identifierPrefix</code> ä»¥é˜²æ­¢åœ¨å¤šæ ¹åº”ç”¨ç¨‹åºä¸­å‘ç”Ÿå†²çªã€‚è¦é…ç½®æ­¤é€‰é¡¹ï¼Œå¯ä»¥æŸ¥çœ‹ <code>hydrateRoot</code> å’Œ <code>ReactDOMServer</code> çš„é€‰é¡¹ã€‚</li></ul><h3 id="usesyncexternalstore" tabindex="-1">useSyncExternalStore <a class="header-anchor" href="#usesyncexternalstore" aria-label="Permalink to &quot;useSyncExternalStore&quot;">â€‹</a></h3><p><code>useSyncExternalStore</code> æ˜¯ React 18 ä¸­å¼•å…¥çš„ä¸€ä¸ªæ–°çš„ Hookï¼Œå®ƒä¸»è¦ç”¨äºä»å¤–éƒ¨æ•°æ®æºè¯»å–å’Œè®¢é˜…æ•°æ®ï¼ŒåŒæ—¶ä¸å¹¶å‘æ¸²æŸ“åŠŸèƒ½ï¼ˆå¦‚é€‰æ‹©æ€§ hydration å’Œæ—¶é—´åˆ‡ç‰‡ï¼‰å…¼å®¹ã€‚</p><p>ä»¥ä¸‹æ˜¯ <code>useSyncExternalStore</code> çš„ä¸€äº›ä½¿ç”¨åœºæ™¯ï¼š</p><ol><li><p><strong>åŸºæœ¬ä½¿ç”¨</strong>ï¼šç®€å•åœ°è®¢é˜…æ•´ä¸ªå­˜å‚¨ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(store.subscribe, store.getSnapshot);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(store.subscribe, store.getSnapshot);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p><strong>è®¢é˜…ç‰¹å®šå­—æ®µ</strong>ï¼šæ‚¨è¿˜å¯ä»¥è®¢é˜…ç‰¹å®šçš„å­—æ®µã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selectedField</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  store.subscribe,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getSnapshot</span><span style="color:#E1E4E8;">().selectedField</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selectedField</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  store.subscribe,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getSnapshot</span><span style="color:#24292E;">().selectedField</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p><strong>æœåŠ¡å™¨æ¸²æŸ“æ—¶çš„ä½¿ç”¨</strong>ï¼šåœ¨æœåŠ¡å™¨æ¸²æŸ“æ—¶ï¼Œæ‚¨å¿…é¡»åºåˆ—åŒ–åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨çš„å­˜å‚¨å€¼ï¼Œå¹¶å°†å…¶æä¾›ç»™ <code>useSyncExternalStore</code>ã€‚React å°†åœ¨ hydration è¿‡ç¨‹ä¸­ä½¿ç”¨æ­¤å¿«ç…§ä»¥é˜²æ­¢æœåŠ¡å™¨ä¸åŒ¹é…ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">selectedField</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useSyncExternalStore</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  store.subscribe,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getSnapshot</span><span style="color:#E1E4E8;">().selectedField,</span></span>
<span class="line"><span style="color:#E1E4E8;">  () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INITIAL_SERVER_SNAPSHOT</span><span style="color:#E1E4E8;">.selectedField</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">selectedField</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useSyncExternalStore</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  store.subscribe,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getSnapshot</span><span style="color:#24292E;">().selectedField,</span></span>
<span class="line"><span style="color:#24292E;">  () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INITIAL_SERVER_SNAPSHOT</span><span style="color:#24292E;">.selectedField</span></span>
<span class="line"><span style="color:#24292E;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p><ul><li><code>getSnapshot</code> å¿…é¡»è¿”å›ä¸€ä¸ªç¼“å­˜å€¼ã€‚å¦‚æœè¿ç»­å¤šæ¬¡è°ƒç”¨ <code>getSnapshot</code>ï¼Œé™¤éåœ¨æ­¤æœŸé—´æœ‰å­˜å‚¨æ›´æ–°ï¼Œå¦åˆ™å®ƒå¿…é¡»è¿”å›å®Œå…¨ç›¸åŒçš„å€¼ã€‚</li></ul><h3 id="useinsertioneffect" tabindex="-1">useInsertionEffect <a class="header-anchor" href="#useinsertioneffect" aria-label="Permalink to &quot;useInsertionEffect&quot;">â€‹</a></h3><p>useInsertionEffect ä¸»è¦ç”¨é€”æ˜¯åœ¨ä½¿ç”¨ useLayoutEffect è¯»å–å¸ƒå±€ä¹‹å‰å°†æ ·å¼æ³¨å…¥åˆ° DOM ä¸­ã€‚</p><p>å‡è®¾æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€ä¸ª css-in-js è§£å†³æ–¹æ¡ˆï¼Œå¹¶å¸Œæœ›åœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰å°†æŸäº›æ ·å¼æ³¨å…¥åˆ° DOM ä¸­ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ <code>useInsertionEffect</code> æ¥ç¡®ä¿æ ·å¼åœ¨ä»»ä½•å…¶ä»– DOM è¯»å–æˆ–æ“ä½œä¹‹å‰è¢«æ³¨å…¥ã€‚</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { useInsertionEffect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;react&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">MyComponent</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">useInsertionEffect</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å‡è®¾ `injectStyles` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†æ ·å¼æ³¨å…¥åˆ° DOM ä¸­</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">injectStyles</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">`</span></span>
<span class="line"><span style="color:#9ECBFF;">      .my-class {</span></span>
<span class="line"><span style="color:#9ECBFF;">        color: red;</span></span>
<span class="line"><span style="color:#9ECBFF;">      }</span></span>
<span class="line"><span style="color:#9ECBFF;">    `</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;my-class&quot;</span><span style="color:#E1E4E8;">&gt;This text should be red.&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">injectStyles</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">css</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">style</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;style&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  style.type </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;text/css&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  style.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(document.</span><span style="color:#B392F0;">createTextNode</span><span style="color:#E1E4E8;">(css));</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.head.</span><span style="color:#B392F0;">appendChild</span><span style="color:#E1E4E8;">(style);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { useInsertionEffect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;react&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">MyComponent</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">useInsertionEffect</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å‡è®¾ `injectStyles` æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†æ ·å¼æ³¨å…¥åˆ° DOM ä¸­</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">injectStyles</span><span style="color:#24292E;">(</span><span style="color:#032F62;">`</span></span>
<span class="line"><span style="color:#032F62;">      .my-class {</span></span>
<span class="line"><span style="color:#032F62;">        color: red;</span></span>
<span class="line"><span style="color:#032F62;">      }</span></span>
<span class="line"><span style="color:#032F62;">    `</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;my-class&quot;</span><span style="color:#24292E;">&gt;This text should be red.&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">injectStyles</span><span style="color:#24292E;">(</span><span style="color:#E36209;">css</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">style</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;style&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  style.type </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;text/css&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  style.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(document.</span><span style="color:#6F42C1;">createTextNode</span><span style="color:#24292E;">(css));</span></span>
<span class="line"><span style="color:#24292E;">  document.head.</span><span style="color:#6F42C1;">appendChild</span><span style="color:#24292E;">(style);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ<code>useInsertionEffect</code> ç”¨äºåœ¨ç»„ä»¶æ¸²æŸ“ä¹‹å‰å°† <code>.my-class</code> çš„æ ·å¼æ³¨å…¥åˆ° DOM ä¸­ã€‚è¿™ç¡®ä¿äº†å½“ç»„ä»¶çš„ DOM è¢«æ¸²æŸ“æ—¶ï¼Œç›¸å…³çš„æ ·å¼å·²ç»å­˜åœ¨ï¼Œä»è€Œé¿å…äº†ä»»ä½•æ½œåœ¨çš„æ ·å¼é—ªçƒæˆ–ä¸ä¸€è‡´ã€‚</p><h2 id="å¹¶å‘æ¨¡å¼-concurrent-mode" tabindex="-1">å¹¶å‘æ¨¡å¼ Concurrent Mode <a class="header-anchor" href="#å¹¶å‘æ¨¡å¼-concurrent-mode" aria-label="Permalink to &quot;å¹¶å‘æ¨¡å¼ Concurrent Mode&quot;">â€‹</a></h2><p>å¹¶å‘æ¨¡å¼ï¼ˆConcurrent Modeï¼‰æ˜¯ React çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä½¿ React çš„æ¸²æŸ“è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­å’Œé‡æ–°å¼€å§‹ï¼Œä»è€Œä¼˜åŒ–åº”ç”¨çš„å“åº”æ€§å’Œäº¤äº’ä½“éªŒã€‚</p><h3 id="ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ¨¡å¼" tabindex="-1">ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ¨¡å¼ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ¨¡å¼" aria-label="Permalink to &quot;ä¸ºä»€ä¹ˆéœ€è¦å¹¶å‘æ¨¡å¼&quot;">â€‹</a></h3><p>åœ¨ React 17 ä¹‹å‰ï¼ŒReact çš„æ¸²æŸ“è¿‡ç¨‹æ˜¯åŒæ­¥çš„ï¼Œå³ä¸€æ—¦å¼€å§‹æ¸²æŸ“ï¼Œå°±ä¼šä¸€ç›´æ‰§è¡Œåˆ°ç»“æŸã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœæ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰ä¸€äº›è€—æ—¶çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ¸²æŸ“å¤§é‡çš„ DOM èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œé¡µé¢ä¸Šçš„å…¶ä»–äº¤äº’å°±ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°æ¸²æŸ“å®Œæˆã€‚</p><p>è¿™ç§åŒæ­¥æ¸²æŸ“çš„æ–¹å¼ï¼Œå¯¹äºå¤§å¤šæ•°åº”ç”¨æ¥è¯´ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚ä½†æ˜¯ï¼Œå¯¹äºä¸€äº›å¤æ‚çš„åº”ç”¨ï¼Œæ¯”å¦‚æœ‰å¤§é‡ DOM èŠ‚ç‚¹çš„åº”ç”¨ï¼Œæˆ–è€…æœ‰å¤æ‚è®¡ç®—çš„åº”ç”¨ï¼ŒåŒæ­¥æ¸²æŸ“å°±ä¼šå¯¼è‡´é¡µé¢ä¸Šçš„å…¶ä»–äº¤äº’è¢«é˜»å¡ï¼Œä»è€Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒReact 18 å¼•å…¥äº†å¹¶å‘æ¨¡å¼ï¼Œä½¿å¾— React çš„æ¸²æŸ“è¿‡ç¨‹å¯ä»¥è¢«ä¸­æ–­å’Œé‡æ–°å¼€å§‹ï¼Œä»è€Œä¼˜åŒ–åº”ç”¨çš„å“åº”æ€§å’Œäº¤äº’ä½“éªŒã€‚</p><h3 id="å¹¶å‘ç‰¹æ€§" tabindex="-1">å¹¶å‘ç‰¹æ€§ <a class="header-anchor" href="#å¹¶å‘ç‰¹æ€§" aria-label="Permalink to &quot;å¹¶å‘ç‰¹æ€§&quot;">â€‹</a></h3><p>React 18 ä¸­çš„å¹¶å‘æ¨¡å¼ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š</p><h4 id="usetransition" tabindex="-1">useTransition <a class="header-anchor" href="#usetransition" aria-label="Permalink to &quot;useTransition&quot;">â€‹</a></h4><p><code>useTransition</code> æ˜¯ React çš„ä¸€ä¸ª Hookï¼Œå®ƒå…è®¸ç»„ä»¶é¿å…ä¸å¸Œæœ›çš„åŠ è½½çŠ¶æ€ï¼Œé€šè¿‡ç­‰å¾…å†…å®¹åŠ è½½å®Œæˆåå†è¿›è¡Œé¡µé¢åˆ‡æ¢ã€‚å®ƒè¿˜å…è®¸ç»„ä»¶å°†è¾ƒæ…¢çš„ã€éœ€è¦æ•°æ®è·å–çš„æ›´æ–°æ¨è¿Ÿåˆ°åç»­çš„æ¸²æŸ“ï¼Œä»è€Œå¯ä»¥ç«‹å³æ¸²æŸ“æ›´å…³é”®çš„æ›´æ–°ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">resource</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setResource</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(initialResource);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">isPending</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">startTransition</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useTransition</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">button</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">disabled</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{isPending}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">startTransition</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nextUserId</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getNextId</span><span style="color:#E1E4E8;">(resource.userId);</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">setResource</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">fetchProfileData</span><span style="color:#E1E4E8;">(nextUserId));</span></span>
<span class="line"><span style="color:#E1E4E8;">          });</span></span>
<span class="line"><span style="color:#E1E4E8;">        }}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        Next</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      {isPending </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot; Loading...&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fallback</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{&lt;</span><span style="color:#79B8FF;">Spinner</span><span style="color:#E1E4E8;"> /&gt;}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">ProfilePage</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">resource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{resource} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#79B8FF;">Suspense</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">resource</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setResource</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(initialResource);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">isPending</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">startTransition</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useTransition</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">button</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">disabled</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{isPending}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">startTransition</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nextUserId</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getNextId</span><span style="color:#24292E;">(resource.userId);</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">setResource</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">fetchProfileData</span><span style="color:#24292E;">(nextUserId));</span></span>
<span class="line"><span style="color:#24292E;">          });</span></span>
<span class="line"><span style="color:#24292E;">        }}</span></span>
<span class="line"><span style="color:#24292E;">      &gt;</span></span>
<span class="line"><span style="color:#24292E;">        Next</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      {isPending </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot; Loading...&quot;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fallback</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{&lt;</span><span style="color:#005CC5;">Spinner</span><span style="color:#24292E;"> /&gt;}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">ProfilePage</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">resource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{resource} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#005CC5;">Suspense</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>åœ¨è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>startTransition</code> åŒ…è£¹äº†æ•°æ®è·å–æ“ä½œã€‚è¿™å…è®¸æˆ‘ä»¬ç«‹å³å¼€å§‹è·å– profile æ•°æ®ï¼ŒåŒæ—¶æ¨è¿Ÿæ¸²æŸ“ä¸‹ä¸€ä¸ª profile é¡µé¢åŠå…¶å…³è”çš„ Spinnerã€‚<code>isPending</code> å¸ƒå°”å€¼è®© React çŸ¥é“æˆ‘ä»¬çš„ç»„ä»¶æ­£åœ¨è¿›è¡Œè½¬æ¢ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å‰ä¸€ä¸ª profile é¡µé¢ä¸Šæ˜¾ç¤ºä¸€äº›åŠ è½½æ–‡æœ¬æ¥é€šçŸ¥ç”¨æˆ·ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>useTransition</code> æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾—åœ¨æ•°æ®åŠ è½½æ—¶ï¼ŒUI å¯ä»¥ä¿æŒå“åº”å¹¶é¿å…ä¸å¿…è¦çš„åŠ è½½çŠ¶æ€ï¼Œä»è€Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p><h4 id="usedeferredvalue" tabindex="-1">useDeferredValue <a class="header-anchor" href="#usedeferredvalue" aria-label="Permalink to &quot;useDeferredValue&quot;">â€‹</a></h4><p><code>useDeferredValue</code> æ˜¯ React çš„ä¸€ä¸ª Hookï¼Œå®ƒè¿”å›ä¸€ä¸ªå¯èƒ½â€œæ»åäºâ€å…¶åŸå§‹å€¼çš„å»¶è¿Ÿç‰ˆæœ¬ã€‚</p><p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼š å½“ä½ æœ‰åŸºäºç”¨æˆ·è¾“å…¥ç«‹å³æ¸²æŸ“çš„å†…å®¹ï¼Œä»¥åŠéœ€è¦ç­‰å¾…æ•°æ®è·å–çš„å†…å®¹æ—¶ï¼Œè¿™ä¸ª Hook é€šå¸¸å¾ˆæœ‰ç”¨ã€‚å®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä¿æŒç•Œé¢çš„å“åº”æ€§ã€‚</p><p><strong>ç¤ºä¾‹</strong>ï¼š</p><div class="language-javascript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> [</span><span style="color:#79B8FF;">text</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">setText</span><span style="color:#E1E4E8;">] </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useState</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;hello&quot;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">deferredText</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useDeferredValue</span><span style="color:#E1E4E8;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">className</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;App&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#6A737D;">/* ä¿æŒå°†å½“å‰æ–‡æœ¬ä¼ é€’ç»™è¾“å…¥ */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{text} </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleChange} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      ...</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#6A737D;">/* ä½†å½“æœ‰å¿…è¦æ—¶ï¼Œåˆ—è¡¨å¯ä»¥â€œæ»åâ€ */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">MySlowList</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">text</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{deferredText} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> [</span><span style="color:#005CC5;">text</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">setText</span><span style="color:#24292E;">] </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useState</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;hello&quot;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">deferredText</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useDeferredValue</span><span style="color:#24292E;">(text);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">className</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;App&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#6A737D;">/* ä¿æŒå°†å½“å‰æ–‡æœ¬ä¼ é€’ç»™è¾“å…¥ */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{text} </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleChange} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      ...</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#6A737D;">/* ä½†å½“æœ‰å¿…è¦æ—¶ï¼Œåˆ—è¡¨å¯ä»¥â€œæ»åâ€ */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">MySlowList</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">text</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{deferredText} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³å¼€å§‹ä¸ºè¾“å…¥æ˜¾ç¤ºæ–°æ–‡æœ¬ï¼Œä½¿ç½‘é¡µæ„Ÿè§‰å“åº”è¿…é€Ÿã€‚ä¸æ­¤åŒæ—¶ï¼Œ<code>MySlowList</code> â€œæ»åâ€ï¼Œå…è®¸å®ƒåœ¨åå°ä½¿ç”¨å½“å‰æ–‡æœ¬è¿›è¡Œæ¸²æŸ“ã€‚</p><p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>useDeferredValue</code> å…è®¸æŸäº› UI éƒ¨åˆ†ç«‹å³å“åº”ç”¨æˆ·è¾“å…¥ï¼ŒåŒæ—¶å…¶ä»–å¯èƒ½éœ€è¦æ›´å¤šæ—¶é—´æ¥æ›´æ–°çš„éƒ¨åˆ†å¯ä»¥ç¨åæ¸²æŸ“ï¼Œä»è€Œæä¾›æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p><h2 id="react18-æ–°ç‰¹æ€§æµç¨‹å›¾" tabindex="-1">React18 æ–°ç‰¹æ€§æµç¨‹å›¾ <a class="header-anchor" href="#react18-æ–°ç‰¹æ€§æµç¨‹å›¾" aria-label="Permalink to &quot;React18 æ–°ç‰¹æ€§æµç¨‹å›¾&quot;">â€‹</a></h2><div class="mermaid eita">null</div><!----><!----></div></div></main><footer class="VPDocFooter" data-v-279178e3 data-v-3e3a0925><!--[--><!--]--><div class="edit-info" data-v-3e3a0925><div class="edit-link" data-v-3e3a0925><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/dapandocs/danpan-docs/blob/master/docs/framework/react/new-features.md" target="_blank" rel="noreferrer" data-v-3e3a0925><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-3e3a0925><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> ä¸ºæ­¤é¡µæä¾›ä¿®æ”¹å»ºè®®<!--]--></a></div><div class="last-updated" data-v-3e3a0925><p class="VPLastUpdated" data-v-3e3a0925 data-v-da9c13a3>æœ€åä¸€æ¬¡æ›´æ–°äº: <time datetime="2023-08-16T07:22:10.000Z" data-v-da9c13a3></time></p></div></div><nav class="prev-next" data-v-3e3a0925><div class="pager" data-v-3e3a0925><a class="pager-link prev" href="/framework/react/render-order.html" data-v-3e3a0925><span class="desc" data-v-3e3a0925>ä¸Šä¸€ç¯‡</span><span class="title" data-v-3e3a0925>çˆ¶å­ç»„ä»¶çš„æ¸²æŸ“é¡ºåº</span></a></div><div class="pager" data-v-3e3a0925><a class="pager-link next" href="/framework/react/strict-mode.html" data-v-3e3a0925><span class="desc" data-v-3e3a0925>ä¸‹ä¸€ç¯‡</span><span class="title" data-v-3e3a0925>React18 ä¸¥æ ¼æ¨¡å¼</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-6c29af8f data-v-b52d1011><div class="container" data-v-b52d1011><p class="message" data-v-b52d1011>å…¨é“¾è·¯å­¦ä¹ ç½‘ç«™ï¼Œæ¬¢è¿ <a target="_blank" style="color: var(--vp-c-brand)" href="https://github.com/dapandocs/danpan-docs">star â­</a> è®©æ›´å¤šäººå‘ç°</p><p class="copyright" data-v-b52d1011><a target="_blank" href="https://beian.miit.gov.cn/">æ²ªICPå¤‡2023024648å·-1</a> | ç‰ˆæƒæ‰€æœ‰ Â© 2023 <a target="_blank" href="https://github.com/dapandocs/danpan-docs">Anthony dapan</a></p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"column_css_tailwindcss_index.md\":\"4c826c02\",\"column_css_css_demos_1.md\":\"f1f6e1d4\",\"column_css_css_index.md\":\"9c5dddb9\",\"column_css_unocss_index.md\":\"e221f4d6\",\"column_git_index.md\":\"46e81e02\",\"column_css_css_flex.md\":\"696668e7\",\"column_css_css_multi-column-layout.md\":\"af27632b\",\"column_javascript_index.md\":\"535e478c\",\"framework_react_hooks_use-callback.md\":\"47c48fce\",\"framework_react_hooks_use-context.md\":\"1986b764\",\"framework_react_hooks_memo.md\":\"cb21e8bb\",\"framework_react_code-splitting.md\":\"c4283ba6\",\"column_git_gitignore.md\":\"65da3b5a\",\"framework_react_hooks_use-imperative-handle.md\":\"598b64ed\",\"column_javascript_promise.md\":\"5e646d32\",\"framework_react_hooks_use-ref.md\":\"bf40554d\",\"framework_react_hooks_forward-ref.md\":\"14f31745\",\"framework_nestjs_index.md\":\"781bb3cf\",\"framework_nestjs_module.md\":\"2d15f38e\",\"framework_react_render-order.md\":\"bce18845\",\"column_javascript_async-await.md\":\"4a090328\",\"index.md\":\"b1d75393\",\"framework_react_hooks_use-memo.md\":\"bb299c00\",\"framework_react_hooks_use-state.md\":\"ae68a572\",\"framework_nestjs_request-parameters.md\":\"4f33cde4\",\"column_css_css_demos_2.md\":\"4588a3e8\",\"framework_vitepress_algolia.md\":\"56dd6db2\",\"framework_react_hooks_use-deferred-value.md\":\"a11ef142\",\"note_index.md\":\"ac9889f5\",\"framework_nestjs_ioc.md\":\"1b8bd159\",\"framework_react_life-cycle.md\":\"5b89165d\",\"framework_vue_index.md\":\"a9b37f5e\",\"framework_react_hooks_use-effect.md\":\"de501216\",\"framework_react_strict-mode.md\":\"5c651c3b\",\"framework_react_hooks_use-reducer.md\":\"f59808e8\",\"framework_react_react-router_routes.md\":\"b1d5aaaf\",\"framework_react_react-router_index.md\":\"a7e96ae6\",\"framework_react_index.md\":\"74114377\",\"framework_react_scanalysis_create-root.md\":\"514eb2d2\",\"note_eslint-prettier.md\":\"f6441999\",\"framework_unocss_index.md\":\"d36ce2b0\",\"framework_react_react-router_browser-router.md\":\"f25f5af6\",\"framework_vitepress_pwa.md\":\"4853f43e\",\"framework_react_jsx.md\":\"b7f2ddde\",\"framework_vitepress_index.md\":\"c7ae4df5\",\"system_index.md\":\"c4220321\",\"framework_react_scanalysis_react-debugger.md\":\"2e9286ca\",\"framework_nestjs_provider.md\":\"3cf7b375\",\"note_package-manager.md\":\"9dd47027\",\"reverse_jsreverse_xhs-scan-login.md\":\"8148a120\",\"framework_react_scanalysis_jsx.md\":\"93fbbc5a\",\"note_tsconfig.md\":\"2775ea23\",\"note_vscode-debugger.md\":\"dab11197\",\"reverse_jsreverse_xhs2.md\":\"4c528e9b\",\"interview_basic_index.md\":\"a0a8dd43\",\"reverse_jsreverse_xhs.md\":\"43e2fd04\",\"framework_react_new-features.md\":\"67830a00\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"å…¨æ ˆå°å†Œ\",\"description\":\"å…¨æ ˆå°å†Œå®˜ç½‘ï¼Œå‰ç«¯è¿›é˜¶å¼€å‘æŠ€å·§ï¼Œæµè§ˆå™¨æ‰©å±•å¼€å‘æŠ€å·§ï¼ŒReactä¸Vueå¼€å‘æŠ€å·§ï¼ŒJSé€†å‘ï¼ŒPythonçˆ¬è™«ï¼ŒNode.jsçˆ¬è™«\",\"base\":\"/\",\"head\":[],\"appearance\":\"dark\",\"themeConfig\":{\"search\":{\"provider\":\"algolia\",\"options\":{\"appId\":\"GQMDRHPOC4\",\"apiKey\":\"0c8f6f8a3db63c9f73781b3268ae5179\",\"indexName\":\"skillgroup\",\"placeholder\":\"è¯·è¾“å…¥å…³é”®è¯\",\"translations\":{\"button\":{\"buttonText\":\"è¯·è¾“å…¥å…³é”®è¯\"}}}},\"sidebar\":{\"/reverse/jsreverse/\":[{\"text\":\"JSé€†å‘\",\"collapsed\":false,\"items\":[{\"text\":\"æŸçº¢è–¯x-s\",\"link\":\"/reverse/jsreverse/xhs\"},{\"text\":\"æŸçº¢è–¯æ‰«ç ç™»å½•\",\"link\":\"/reverse/jsreverse/xhs-scan-login\"}]}],\"/framework/react\":[{\"text\":\"React\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/framework/react/\"},{\"text\":\"JSX è¯­æ³•\",\"link\":\"/framework/react/jsx\"},{\"text\":\"React Hooks\",\"collapsed\":true,\"items\":[{\"text\":\"useState\",\"link\":\"/framework/react/hooks/use-state\"},{\"text\":\"useEffect\",\"link\":\"/framework/react/hooks/use-effect\"},{\"text\":\"useRef\",\"link\":\"/framework/react/hooks/use-ref\"},{\"text\":\"memo\",\"link\":\"/framework/react/hooks/memo\"},{\"text\":\"useMemo\",\"link\":\"/framework/react/hooks/use-memo\"},{\"text\":\"useCallback\",\"link\":\"/framework/react/hooks/use-callback\"},{\"text\":\"useContext\",\"link\":\"/framework/react/hooks/use-context\"},{\"text\":\"forwardRef\",\"link\":\"/framework/react/hooks/forward-ref\"},{\"text\":\"useReducer\",\"link\":\"/framework/react/hooks/use-reducer\"},{\"text\":\"useImperativeHandle\",\"link\":\"/framework/react/hooks/use-imperative-handle\"},{\"text\":\"useDeferredValue\",\"link\":\"/framework/react/hooks/use-deferred-value\"}]},{\"text\":\"ä»£ç åˆ†å‰²ï¼ˆCode Splittingï¼‰\",\"link\":\"/framework/react/code-splitting\"},{\"text\":\"React ç”Ÿå‘½å‘¨æœŸ\",\"link\":\"/framework/react/life-cycle\"},{\"text\":\"çˆ¶å­ç»„ä»¶çš„æ¸²æŸ“é¡ºåº\",\"link\":\"/framework/react/render-order\"},{\"text\":\"React18 æ–°ç‰¹æ€§\",\"link\":\"/framework/react/new-features\"},{\"text\":\"React18 ä¸¥æ ¼æ¨¡å¼\",\"link\":\"/framework/react/strict-mode\"},{\"text\":\"React18 æºç è§£æç³»åˆ—\",\"collapsed\":true,\"items\":[{\"text\":\"React Debug é…ç½®\",\"link\":\"/framework/react/scanalysis/react-debugger\"},{\"text\":\"React.createElement å’Œ jsx()\",\"link\":\"/framework/react/scanalysis/jsx\"},{\"text\":\"createRoot ç›¸å…³\",\"link\":\"/framework/react/scanalysis/create-root\"}]}]},{\"text\":\"React-Router\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/framework/react/react-router/\"},{\"text\":\"Router Components\",\"items\":[{\"text\":\"BrowserRouter\",\"link\":\"/framework/react/react-router/browser-router\"}]},{\"text\":\"Components\",\"items\":[{\"text\":\"Routes\",\"link\":\"/framework/react/react-router/routes\"}]}]}],\"/framework/vitepress/\":[{\"text\":\"VitePress\",\"collapsed\":false,\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/framework/vitepress/\"},{\"text\":\"å¼€å¯ PWA\",\"link\":\"/framework/vitepress/pwa\"},{\"text\":\"æ·»åŠ  Algolia æœç´¢\",\"link\":\"/framework/vitepress/algolia\"}]}],\"/framework/nestjs/\":[{\"text\":\"NestJS\",\"collapsed\":false,\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/framework/nestjs/\"},{\"text\":\"ä¾èµ–æ³¨å…¥ï¼ˆIOCï¼‰\",\"link\":\"/framework/nestjs/ioc\"},{\"text\":\"5 ç§å‚æ•°ä¼ é€’æ–¹å¼\",\"link\":\"/framework/nestjs/request-parameters\"},{\"text\":\"provider ä¾èµ–æ³¨å…¥\",\"link\":\"/framework/nestjs/provider\"},{\"text\":\"æ¨¡å—\",\"link\":\"/framework/nestjs/module\"}]}],\"/column/javascript/\":[{\"text\":\"JavaScript\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/column/javascript/\"},{\"text\":\"Promise\",\"link\":\"/column/javascript/promise\"},{\"text\":\"async/await\",\"link\":\"/column/javascript/async-await\"}]}],\"/column/git/\":[{\"text\":\"Git\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/column/git/\"},{\"text\":\".gitignore\",\"link\":\"/column/git/gitignore\"}]}],\"/column/css/css/\":[{\"text\":\"çŸ¥è¯†ç‚¹\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/column/css/css/\"},{\"text\":\"Flexboxï¼ˆå¼¹æ€§ç›’å­ï¼‰\",\"link\":\"/column/css/css/flex\"},{\"text\":\"CSS å¤šåˆ—å¸ƒå±€\",\"link\":\"/column/css/css/multi-column-layout\"}]},{\"text\":\"æ¡ˆä¾‹çµæ„Ÿ\",\"items\":[{\"text\":\"å®ç°æ°´å¹³å‚ç›´å±…ä¸­æœ€ä¾¿æ·çš„æ–¹æ³•\",\"link\":\"/column/css/css/demos/1\"},{\"text\":\"flex å®ç°ä¸‰åˆ—å¸ƒå±€\",\"link\":\"/column/css/css/demos/2\"}]}],\"/column/css/tailwindcss/\":[{\"text\":\"tailwindcss\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/column/css/tailwindcss/\"}]}],\"/column/css/unocss/\":[{\"text\":\"unocss\",\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/column/css/unocss/\"}]}],\"/note/\":[{\"text\":\"å° è®°\",\"collapsed\":false,\"items\":[{\"text\":\"ç®€è¿°\",\"link\":\"/note/\"},{\"text\":\"node åŒ…ç®¡ç†å™¨\",\"link\":\"/note/package-manager\"},{\"text\":\"vscode debugger ç”¨æ³•\",\"link\":\"/note/vscode-debugger\"},{\"text\":\"eslintã€prettier ç”¨æ³•\",\"link\":\"/note/eslint-prettier\"},{\"text\":\"tsconfig.json ç”¨æ³•\",\"link\":\"/note/tsconfig\"}]}]},\"footer\":{\"message\":\"å…¨é“¾è·¯å­¦ä¹ ç½‘ç«™ï¼Œæ¬¢è¿ <a target=\\\"_blank\\\" style=\\\"color: var(--vp-c-brand)\\\" href=\\\"https://github.com/dapandocs/danpan-docs\\\">star â­</a> è®©æ›´å¤šäººå‘ç°\",\"copyright\":\"<a target=\\\"_blank\\\" href=\\\"https://beian.miit.gov.cn/\\\">æ²ªICPå¤‡2023024648å·-1</a> | ç‰ˆæƒæ‰€æœ‰ Â© 2023 <a target=\\\"_blank\\\" href=\\\"https://github.com/dapandocs/danpan-docs\\\">Anthony dapan</a>\"},\"nav\":[{\"text\":\"ğŸ”¥ é€†å‘æ±‡æ€»\",\"items\":[{\"text\":\"JSé€†å‘\",\"link\":\"/reverse/jsreverse/xhs\"}]},{\"text\":\"ğŸ”¥ å‰ç«¯æ¡†æ¶\",\"items\":[{\"text\":\"React\",\"link\":\"/framework/react/\"},{\"text\":\"Vue\",\"link\":\"/framework/vue/\"},{\"text\":\"VitePress\",\"link\":\"/framework/vitepress/\"},{\"text\":\"NestJs\",\"link\":\"/framework/nestjs/\"}]},{\"text\":\"ğŸŒµ ä¸“ æ \",\"items\":[{\"text\":\"javascript\",\"link\":\"/column/javascript/\"},{\"text\":\"git\",\"link\":\"/column/git/\"},{\"text\":\"æ ·å¼\",\"items\":[{\"text\":\"css\",\"link\":\"/column/css/css/\"},{\"text\":\"tailwindcss\",\"link\":\"/column/css/tailwindcss/\"},{\"text\":\"unocss\",\"link\":\"/column/css/unocss/\"}]}]},{\"text\":\"ğŸ“” å° è®°\",\"link\":\"/note/\"},{\"text\":\"ğŸŒ ç«™ ç‚¹\",\"items\":[{\"text\":\"é»˜è®¤ç«™ç‚¹\",\"link\":\"https://www.skillgroup.cn/\"},{\"text\":\"å¤‡ç”¨ç«™ç‚¹\",\"link\":\"https://docs.skillgroup.cn/\"},{\"text\":\"Vercel ç«™ç‚¹\",\"link\":\"https://dapandocs.vercel.app/\"}]}],\"logo\":\"/logo.svg\",\"lastUpdatedText\":\"æœ€åä¸€æ¬¡æ›´æ–°äº\",\"outline\":\"deep\",\"docFooter\":{\"prev\":\"ä¸Šä¸€ç¯‡\",\"next\":\"ä¸‹ä¸€ç¯‡\"},\"returnToTopLabel\":\"è¿”å›é¡¶éƒ¨\",\"outlineTitle\":\"å¤§çº²\",\"darkModeSwitchLabel\":\"å¤–è§‚\",\"sidebarMenuLabel\":\"ç›®å½•\",\"editLink\":{\"pattern\":\"https://github.com/dapandocs/danpan-docs/blob/master/docs/:path\",\"text\":\"ä¸ºæ­¤é¡µæä¾›ä¿®æ”¹å»ºè®®\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/dapandocs/danpan-docs\"}]},\"locales\":{\"root\":{\"label\":\"ç®€ä½“ä¸­æ–‡\",\"lang\":\"zh-CN\"}},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>